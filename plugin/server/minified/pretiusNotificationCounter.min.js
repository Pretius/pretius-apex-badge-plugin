var pnc=function(){"use strict";var t=function(t){var e="Pretius Badge Notification: ";apex.debug.info(e+"render",t),n(),r(t)},e=function(t){return 0!=$(t).width()},n=function(){void 0===jQuery.fn.onPositionChanged&&(jQuery.fn.onPositionChanged=function(t,n){null==n&&(n=100);var a=$(this[0]);if(a.length<1)return a;var i=null,o=null,r=null,s=null;return setInterval(function(){null==r&&(r=e(a));var n=e(a);if(r!=n){var f=$(a).attr("associatedElement");n?($('.notification-badge[associatedElement="'+f+'"]').removeClass("notification-badge-invisible"),i+=1e-4,r=!0):($('.notification-badge[associatedElement="'+f+'"]').addClass("notification-badge-invisible"),r=!1)}null==s&&(s=$(a).width());var c=$(a).width();if(s!=c&&e(a)&&(i+=1e-4),null==a||a.length<1)return a;null==i&&(i=a.position()),null==o&&(o=a.offset());var u=a.position(),l=a.offset();i.top==u.top&&i.left==u.left||($(this).trigger("onPositionChanged",{lastPos:i,newPos:u}),"function"==typeof t&&t(i,u),i=a.position()),o.top==l.top&&o.left==l.left||($(this).trigger("onOffsetChanged",{lastOff:o,newOff:l}),"function"==typeof t&&t(o,l),o=a.offset())},n),a})},a=function(t,n,a){$.each(t.da.affectedElements,function(i,r){var s=$(r).attr("associatedElement");s||(s=Array.from(crypto.getRandomValues(new Uint8Array(32))).map(t=>t.toString(16).padStart(2,"0")).join("")),"Y"==t.da.action.attribute04&&void 0!==n&&(n=apex.util.escapeHTML(n));var f=!1;"Y"==t.da.action.attribute12&&(f=!0);var c=t.da.action.attribute08,u=r;"BODY"==c&&(u="body"),$(u).badge(n,null,f,s,a,t),$(r).attr("associatedElement",s);var l=$('.notification-badge[associatedElement="'+s+'"]');o(t,r),e(r)&&$(l).removeClass("notification-badge-invisible"),a||($(l).removeClass("notification-badge-spinner"),$(l).find(".u-Processing").remove()),$(r).onPositionChanged(function(){o(t,r)})})},i=function(t){return new Function("return "+t)()},o=function(t,e){var n=Number(t.da.action.attribute09),a=Number(t.da.action.attribute10),i=$(e).attr("associatedElement"),o=$('.notification-badge[associatedElement="'+i+'"]'),r=$(o).outerWidth(),s=$(e).outerWidth(),f=Math.max(s-r,0)+n,c=$(e).offset().left+f,u=$(e).offset().top-$(o).height()+a;$(o).offset({top:u,left:c})},r=function(t){if("Y"==t.da.action.attribute11&&a(t,"...","Y"),"JS_EXPRESSION"==t.da.action.attribute01)a(t,i(t.da.action.attribute05));else{var e=[];"string"==typeof t.da.action.attribute03&&(e=t.da.action.attribute03.split(",")),apex.server.plugin(t.opt.ajaxIdentifier,{pageItems:e},{success:function(e){a(t,e.value)},error:function(e,n,a){s(t,e,n,a)}})}},s=function(t,e,n,a){$.each(t.da.affectedElements,function(t,e){var n=$(e).attr("associatedElement"),a=$('.notification-badge[associatedElement="'+n+'"]');$(a).parent(".notification-badge-url").remove(),$(a).remove()}),apex.message.clearErrors(),apex.message.showErrors([{type:"error",location:["page"],message:"[Pretius Badge Notification] "+a+"<br>Please check browser console.",unsafe:!1}]),apex.debug.log(e,n,a)};return{render:t,ajaxErrorHandler:s}}();